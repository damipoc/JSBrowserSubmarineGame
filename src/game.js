function gridScanSetup(){var e;userCount=0,valid=!0,userPlaced=!1;var t;for(i=0;10>i&&valid;i++)for(f=0;10>f;f++){if(userPlaced&&1!=userCount){valid=!1;break}if(""!=document.getElementById(i+"-"+f).value&&(e=document.getElementById(i+"-"+f).value,gridContentValid(e),!valid)){t=i+"-"+f;break}}valid&&!userPlaced?document.getElementById("outcome").innerHTML="There must be at least one U on the board":!valid&&userPlaced?document.getElementById("outcome").innerHTML="Board contains invalid character at "+t:valid||userPlaced?endPhaseConditions()?(stage="Play",document.getElementById("stage").innerHTML="Stage:"+stage,document.getElementById("submit").disabled=!1,document.getElementById("userInput").disabled=!1,document.getElementById("startEnd").innerHTML="End",lockGrid(),scoreboard()):(stage="End",document.getElementById("stage").innerHTML="Stage:"+stage,document.getElementById("startEnd").disabled=!0,scoreboard(),endPhase()):document.getElementById("outcome").innerHTML="Board contains invalid character at "+t}function gridContentValid(e){switch(e=e.toLowerCase()){case"5":totalFuel+=5;break;case"6":totalFuel+=6;break;case"7":totalFuel+=7;break;case"8":totalFuel+=8;break;case"9":totalFuel+=9;break;case"o":break;case"u":userPlaced=!0,userCount++;break;case"k":killerCountSetup++;break;default:valid=!1}}function rounds(){if(document.getElementById("outcome").innerHTML="",userMove=document.getElementById("userInput").value,userMove=userMove.toLowerCase(),endPhaseConditions())if("w"==userMove||"a"==userMove||"d"==userMove||"x"==userMove)if(playerTurn=!0,fuel>0){if(movement(userMove),!userOutOfBounds){for(round++,fuel--,playerTurn=!1,m=0;killerCountSetup>m;m++)killerCountPlay=killerCountSetup-m,aiMove();scoreboard()}}else document.getElementById("outcome").innerHTML="Out of fuel";else document.getElementById("outcome").innerHTML="Invalid input, use WADX to move.";else stage="End",document.getElementById("stage").innerHTML="Stage:"+stage,document.getElementById("startEnd").disabled=!0,document.getElementById("submit").disabled=!0,document.getElementById("userInput").disabled=!0,scoreboard(),endPhase()}function aiMove(){var e=["a","w","d","x","aw","wd","ax","xd"],t=Math.random(),o=e.length,n=Math.floor(t*o),u=e[n];movement(u)}function scoreboard(){document.getElementById("round").innerHTML="Round: "+round,document.getElementById("fuel").innerHTML="Fuel: "+fuel,document.getElementById("userScore").innerHTML="User Score: "+userScore,document.getElementById("computerScore").innerHTML="Computer Score: "+computerScore}function movement(e){var t,o,n,u,d,l,r,a,c,s,i,m;userOutOfBounds=!1,killOutOfBounds=!1,"w"==e&&(t=playerMove(),n=t[0],u=t[1],o=n+"-"+u,n--,d=n+"-"+u,playerTurn?n>-1?(checkDesiredPosition(d),userOutOfBounds||userKilled?userKilled&&(document.getElementById(o).value=""):(document.getElementById(o).value="",document.getElementById(d).value="u")):(document.getElementById("outcome").innerHTML="Invalid move, you can't move out of bounds or onto obostacles.",userOutOfBounds=!0,round--,fuel++):n>-1?(checkDesiredPosition(d),killOutOfBounds?aiMove():(document.getElementById(o).value="",document.getElementById(d).value="k")):aiMove()),"a"==e&&(t=playerMove(),n=t[0],u=t[1],o=n+"-"+u,u--,l=n+"-"+u,playerTurn?u>-1?(checkDesiredPosition(l),userOutOfBounds||userKilled?userKilled&&(document.getElementById(o).value=""):(document.getElementById(o).value="",document.getElementById(l).value="u")):(document.getElementById("outcome").innerHTML="Invalid move, you can't move out of bounds or onto obostacles.",userOutOfBounds=!0,round--,fuel++):u>-1?(checkDesiredPosition(l),killOutOfBounds?aiMove():(document.getElementById(o).value="",document.getElementById(l).value="k")):aiMove()),"d"==e&&(t=playerMove(),n=t[0],u=t[1],o=n+"-"+u,u++,r=n+"-"+u,playerTurn?10>u?(checkDesiredPosition(r),userOutOfBounds||userKilled?userKilled&&(document.getElementById(o).value=""):(document.getElementById(o).value="",document.getElementById(r).value="u")):(document.getElementById("outcome").innerHTML="Invalid move, you can't move out of bounds or onto obstacles.",userOutOfBounds=!0,round--,fuel++):10>u?(checkDesiredPosition(r),killOutOfBounds?aiMove():(document.getElementById(o).value="",document.getElementById(r).value="k")):aiMove()),"x"==e&&(t=playerMove(),n=t[0],u=t[1],o=n+"-"+u,n++,a=n+"-"+u,playerTurn?10>n?(checkDesiredPosition(a),userOutOfBounds||userKilled?userKilled&&(document.getElementById(o).value=""):(document.getElementById(o).value="",document.getElementById(a).value="u")):(document.getElementById("outcome").innerHTML="Invalid move, you can't move out of bounds or onto obostacles.",userOutOfBounds=!0,round--,fuel++):10>n?(checkDesiredPosition(a),killOutOfBounds?aiMove():(document.getElementById(o).value="",document.getElementById(a).value="k")):aiMove()),"aw"==e&&(t=playerMove(),n=t[0],u=t[1],o=n+"-"+u,n--,u--,c=n+"-"+u,n>-1&&u>-1?(checkDesiredPosition(c),killOutOfBounds?aiMove():(document.getElementById(o).value="",document.getElementById(c).value="k")):aiMove()),"wd"==e&&(t=playerMove(),n=t[0],u=t[1],o=n+"-"+u,n--,u++,s=n+"-"+u,n>-1&&10>u?(checkDesiredPosition(s),killOutOfBounds?aiMove():(document.getElementById(o).value="",document.getElementById(s).value="k")):aiMove()),"ax"==e&&(t=playerMove(),n=t[0],u=t[1],o=n+"-"+u,n++,u--,i=n+"-"+u,10>n&&u>-1?(checkDesiredPosition(i),killOutOfBounds?aiMove():(document.getElementById(o).value="",document.getElementById(i).value="k")):aiMove()),"xd"==e&&(t=playerMove(),n=t[0],u=t[1],o=n+"-"+u,n++,u++,m=n+"-"+u,10>n&&10>u?(checkDesiredPosition(m),killOutOfBounds?aiMove():(document.getElementById(o).value="",document.getElementById(m).value="k")):aiMove())}function playerMove(){var e,t,o;if(playerTurn)player="u";else{player="k";var n=killerCountPlay}for(i=0;10>i;i++)for(f=0;10>f;f++)if(e=document.getElementById(i+"-"+f).value,e=e.toLowerCase(),!playerTurn&&n>1&&e==player)n--;else{if(playerTurn&&e==player)return t=i,o=f,[t,o];if(!playerTurn&&1==n&&e==player)return t=i,o=f,[t,o]}}function checkDesiredPosition(e){var t=document.getElementById(e).value;switch(t=t.toLowerCase()){case"5":playerTurn?(fuel+=5,userScore+=5):computerScore+=5;break;case"6":playerTurn?(fuel+=6,userScore+=6):computerScore+=6;break;case"7":playerTurn?(fuel+=7,userScore+=7):computerScore+=7;break;case"8":playerTurn?(fuel+=8,userScore+=8):computerScore+=8;break;case"9":playerTurn?(fuel+=9,userScore+=9):computerScore+=9;break;case"o":playerTurn?(document.getElementById("outcome").innerHTML="Invalid move, you can't move out of bounds or onto obostacles.",userOutOfBounds=!0,round--,fuel++):killOutOfBounds=!0;break;case"u":userKilled=!0;break;case"k":playerTurn?userKilled=!0:killOutOfBounds=!0}}function endPhaseConditions(){return 0==killerCountSetup||userKilled||totalFuel==userScore+computerScore||0==fuel?!1:!0}function endPhase(){document.getElementById("outcome").innerHTML=0==killerCountSetup||userScore>computerScore&&!userKilled?"User wins with score: "+userScore:userKilled||computerScore>userScore?"Computer wins with score: "+computerScore:"Draw between user and computer."}function lockGrid(){for(i=0;10>i;i++)for(f=0;10>f;f++)document.getElementById(i+"-"+f).disabled=!0}var currLocation,valid=!0,userPlaced=!1,stage="Setup",userOutOfBounds=!1,killerCountSetup=0,killerCountPlay,totalFuel=0,round=0,fuel=10,userScore=0,computerScore=0,userMove,playerTurn,player,killOutOfBounds=!1,userKilled=!1;document.getElementById("outcome").innerHTML="",document.getElementById("startEnd").innerHTML="Start",document.getElementById("submit").disabled=!0,document.getElementById("userInput").disabled=!0,document.getElementById("startEnd").onclick=function(){"Setup"==stage?gridScanSetup():"Play"==stage&&(stage="End",document.getElementById("stage").innerHTML="Stage:"+stage,document.getElementById("startEnd").disabled=!0,document.getElementById("submit").disabled=!0,document.getElementById("userInput").disabled=!0,scoreboard(),endPhase())},document.getElementById("submit").onclick=function(){""!=document.getElementById("userInput").value?(document.getElementById("outcome").innerHTML="",rounds()):document.getElementById("outcome").innerHTML="Please insert an input in the text field above."};